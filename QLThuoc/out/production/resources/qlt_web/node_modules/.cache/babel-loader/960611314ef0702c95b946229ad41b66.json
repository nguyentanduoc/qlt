{"ast":null,"code":"import _defineProperty from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\src\\\\views\\\\Bill\\\\Request\\\\TableRequest.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport DatePicker from 'react-datepicker';\nimport AlertCommon from '../../Common/AlertCommon';\nimport { Table } from 'antd';\nimport Select from 'react-select';\nimport { getAllProduct, getSpecUnit, getAmountProduct } from '../../../actions/requestProductAction';\nimport { Button, Row, Col, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Label, Input, FormFeedback } from 'reactstrap';\nvar columns = [{\n  title: 'Tên Sản Phẩm',\n  dataIndex: 'product',\n  key: 'product'\n}, {\n  title: 'Số Lượng',\n  dataIndex: 'amount',\n  key: 'amount'\n}, {\n  title: 'Đơn Vị',\n  dataIndex: 'specUnit',\n  key: 'specUnit'\n}];\nexport var TableRequest =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TableRequest, _Component);\n\n  function TableRequest(props) {\n    var _this;\n\n    _classCallCheck(this, TableRequest);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TableRequest).call(this, props));\n\n    _this.onAddproduct = function (e) {\n      e.preventDefault();\n\n      _this.toggle();\n    };\n\n    _this.toggle = function () {\n      _this.setState({\n        modal: !_this.state.modal\n      });\n    };\n\n    _this.handleSeletion = function (e, selection) {\n      switch (selection.name) {\n        case 'product':\n          _this.props.onGetSpecUnit(e.value);\n\n          _this.props.onGetAmountProduct(e.value, _this.props.authenReducer.branch.id);\n\n          _this.setState({\n            product: e\n          });\n\n          break;\n\n        case 'specUnit':\n          _this.setState({\n            specUnit: e\n          });\n\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    _this.changeHandler = function (e) {\n      var name = e.target.name;\n      var value = e.target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.addImport = function (e) {\n      e.preventDefault();\n\n      if (_this.state.amount > _this.props.requestReducer.amount) {\n        _this.setState({\n          invalid: true\n        });\n      } else {\n        var _this$state = _this.state,\n            data = _this$state.data,\n            dataView = _this$state.dataView;\n        data.push({\n          product: _this.state.product,\n          specUnit: _this.state.specUnit,\n          amount: _this.state.amount\n        });\n        dataView.push({\n          product: _this.state.product.label,\n          specUnit: _this.state.specUnit.label,\n          amount: _this.state.amount\n        });\n\n        _this.setState({\n          data: data,\n          dataView: dataView,\n          invalid: false\n        });\n      }\n    };\n\n    _this.addImportAndExit = function (e) {\n      _this.addImport(e);\n\n      _this.toggle();\n    };\n\n    _this.onSave = function (e) {\n      e.preventDefault();\n\n      _this.props.onSave(_this.state.data, _this.props.authenReducer.branch);\n    };\n\n    _this.state = {\n      data: [],\n      dataView: [],\n      modal: false,\n      product: {},\n      specUnit: {},\n      amount: 0,\n      createBillDate: new Date(),\n      invalid: false\n    };\n    return _this;\n  }\n\n  _createClass(TableRequest, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {// if(this.props.importRoductReducer.saveSuccess){\n      //   this.setState({ data:[], dataView:[]});\n      //   this.props.onResetSaveSuccess();\n      // }\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.onGetAllProduct(this.props.authenReducer.branch);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$requestRe = this.props.requestReducer,\n          products = _this$props$requestRe.products,\n          specUnitSelection = _this$props$requestRe.specUnitSelection,\n          amount = _this$props$requestRe.amount;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: \"4\",\n        md: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(Label, {\n        htmlFor: \"dateCreated\",\n        className: \"pr-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Ng\\xE0y Y\\xEAu C\\u1EA7u\"), React.createElement(DatePicker, {\n        disabled: true,\n        className: \"form-control\",\n        selected: this.state.createBillDate,\n        dateFormat: \"dd/MM/yyyy\",\n        name: \"dateCreated\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        xs: \"4\",\n        md: \"4\",\n        className: \"text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(AlertCommon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      })), React.createElement(Col, {\n        xs: \"4\",\n        md: \"4\",\n        className: \"text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.onAddproduct.bind(this),\n        size: \"sm\",\n        color: \"primary\",\n        className: \"btn-brand\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Th\\xEAm S\\u1EA3n Ph\\u1EA9m\")), ' ', React.createElement(Button, {\n        size: \"sm\",\n        color: \"success\",\n        onClick: this.onSave.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-dot-circle-o\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), ' ', \"Y\\xEAu C\\u1EA7u\"))), React.createElement(Table, {\n        dataSource: this.state.dataView,\n        columns: columns,\n        rowKey: \"product\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(Modal, {\n        isOpen: this.state.modal,\n        toggle: this.toggle.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        toggle: this.toggle.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Th\\xEAm S\\u1EA3n Ph\\u1EA9m\"), React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Label, {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"S\\u1EA3n Ph\\u1EA9m\"), React.createElement(Select, {\n        options: products,\n        onChange: this.handleSeletion.bind(this),\n        isMulti: false,\n        name: \"product\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(Label, {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"\\u0110\\u01A1n V\\u1ECB\"), React.createElement(Select, {\n        options: specUnitSelection,\n        onChange: this.handleSeletion.bind(this),\n        isMulti: false,\n        name: \"specUnit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(Label, {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"S\\u1ED1 L\\u01B0\\u1EE3ng\"), React.createElement(Input, {\n        invalid: this.state.invalid,\n        name: \"amount\",\n        onChange: this.changeHandler.bind(this),\n        value: this.state.amount,\n        type: \"number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }), React.createElement(FormFeedback, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"Xin l\\u1ED7i! vui l\\xF2ng nh\\u1EADp s\\u1ED1 l\\u01B0\\u1EE3ng nh\\u1ECF h\\u01A1n \", amount))), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.addImport.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"L\\u01B0u v\\xE0 Ti\\u1EBFp T\\u1EE5c\"), ' ', React.createElement(Button, {\n        color: \"warning\",\n        onClick: this.addImportAndExit.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"L\\u01B0u v\\xE0 Tho\\xE1t\"), ' ', React.createElement(Button, {\n        color: \"secondary\",\n        onClick: this.toggle.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"Tho\\xE1t\"))));\n    }\n  }]);\n\n  return TableRequest;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    requestReducer: state.requestReducer,\n    authenReducer: state.auth\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onGetAllProduct: function onGetAllProduct(branch) {\n      return dispatch(getAllProduct(branch));\n    },\n    onGetSpecUnit: function onGetSpecUnit(id) {\n      return dispatch(getSpecUnit(id));\n    },\n    onSave: function onSave(data, branch) {// return dispatch(save(data, branch));\n    },\n    onResetSaveSuccess: function onResetSaveSuccess() {// return dispatch(resetSaveSuccess());\n    },\n    onGetAmountProduct: function onGetAmountProduct(id, branchId) {\n      return dispatch(getAmountProduct(id, branchId));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TableRequest);","map":{"version":3,"sources":["D:\\LV\\qlt\\qlt_web\\src\\views\\Bill\\Request\\TableRequest.js"],"names":["React","Component","connect","DatePicker","AlertCommon","Table","Select","getAllProduct","getSpecUnit","getAmountProduct","Button","Row","Col","Modal","ModalHeader","ModalBody","ModalFooter","FormGroup","Label","Input","FormFeedback","columns","title","dataIndex","key","TableRequest","props","onAddproduct","e","preventDefault","toggle","setState","modal","state","handleSeletion","selection","name","onGetSpecUnit","value","onGetAmountProduct","authenReducer","branch","id","product","specUnit","changeHandler","target","addImport","amount","requestReducer","invalid","data","dataView","push","label","addImportAndExit","onSave","createBillDate","Date","onGetAllProduct","products","specUnitSelection","bind","mapStateToProps","auth","mapDispatchToProps","dispatch","onResetSaveSuccess","branchId"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport DatePicker from 'react-datepicker'\r\nimport AlertCommon from '../../Common/AlertCommon'\r\nimport { Table } from 'antd'\r\nimport Select from 'react-select'\r\nimport { getAllProduct, getSpecUnit, getAmountProduct } from '../../../actions/requestProductAction'\r\nimport {\r\n  Button,\r\n  Row,\r\n  Col,\r\n  Modal,\r\n  ModalHeader,\r\n  ModalBody,\r\n  ModalFooter,\r\n  FormGroup,\r\n  Label,\r\n  Input,\r\n  FormFeedback\r\n} from 'reactstrap'\r\n\r\nconst columns  = [{\r\n  title: 'Tên Sản Phẩm',\r\n  dataIndex: 'product',\r\n  key: 'product',\r\n},{\r\n  title: 'Số Lượng',\r\n  dataIndex: 'amount',\r\n  key: 'amount',\r\n},{\r\n  title: 'Đơn Vị',\r\n  dataIndex: 'specUnit',\r\n  key: 'specUnit',\r\n}]\r\n\r\nexport class TableRequest extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      data:[],\r\n      dataView:[],\r\n      modal: false,\r\n      product: {},\r\n      specUnit: {},\r\n      amount:0,\r\n      createBillDate: new Date(),\r\n      invalid: false\r\n    }\r\n  }\r\n  onAddproduct = (e) => {\r\n    e.preventDefault();\r\n    this.toggle();\r\n  }\r\n  toggle = () => {\r\n    this.setState({\r\n      modal: !this.state.modal,\r\n    });\r\n  }\r\n  handleSeletion = (e, selection) => {\r\n    switch (selection.name) {\r\n      case 'product':\r\n        this.props.onGetSpecUnit(e.value);\r\n        this.props.onGetAmountProduct(e.value, this.props.authenReducer.branch.id);\r\n        this.setState({product: e});\r\n        break;\r\n      \r\n      case 'specUnit':\r\n        this.setState({specUnit: e});\r\n        break;\r\n      \r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  changeHandler = (e) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  }\r\n  addImport = (e) => {\r\n    e.preventDefault();\r\n    if(this.state.amount > this.props.requestReducer.amount) {\r\n      this.setState({invalid: true});\r\n    } else {\r\n      let {data, dataView} = this.state;\r\n      data.push({\r\n        product: this.state.product,\r\n        specUnit: this.state.specUnit,\r\n        amount:this.state.amount\r\n      });\r\n      dataView.push({\r\n        product: this.state.product.label,\r\n        specUnit: this.state.specUnit.label,\r\n        amount:this.state.amount\r\n      });\r\n      this.setState({data: data, dataView: dataView, invalid: false});\r\n    }\r\n  }\r\n  addImportAndExit = (e) => {\r\n    this.addImport(e);\r\n    this.toggle();\r\n  }\r\n  onSave = (e) => {\r\n    e.preventDefault();\r\n    this.props.onSave(this.state.data, this.props.authenReducer.branch);\r\n  }\r\n  componentDidUpdate(){\r\n    // if(this.props.importRoductReducer.saveSuccess){\r\n    //   this.setState({ data:[], dataView:[]});\r\n    //   this.props.onResetSaveSuccess();\r\n    // }\r\n  }\r\n  componentWillMount(){\r\n    this.props.onGetAllProduct(this.props.authenReducer.branch);\r\n  }\r\n  render() {\r\n    const { products, specUnitSelection, amount } = this.props.requestReducer;\r\n    return (\r\n      <div>\r\n          <Row>\r\n            <Col xs=\"4\" md=\"4\">\r\n              <FormGroup>\r\n                <Label htmlFor='dateCreated' className='pr-1'>Ngày Yêu Cầu</Label>\r\n                <DatePicker\r\n                      disabled={true}\r\n                      className=\"form-control\"\r\n                      selected={this.state.createBillDate}\r\n                      dateFormat=\"dd/MM/yyyy\"\r\n                      name='dateCreated'/>\r\n              </FormGroup>\r\n            </Col>\r\n            <Col xs=\"4\" md=\"4\" className=\"text-right\">\r\n              <AlertCommon/>\r\n            </Col>\r\n            <Col xs=\"4\" md=\"4\" className=\"text-right\">\r\n              <Button onClick={this.onAddproduct.bind(this)} size=\"sm\" color=\"primary\" className=\"btn-brand\"><i className=\"fas fa-plus\"></i><span>Thêm Sản Phẩm</span></Button>{' '}\r\n              <Button size=\"sm\" color=\"success\" onClick={this.onSave.bind(this)}><i className=\"fa fa-dot-circle-o\"></i>{' '}Yêu Cầu</Button>\r\n            </Col>\r\n          </Row>\r\n            <Table dataSource={this.state.dataView} columns={columns} rowKey='product'/>\r\n          <Modal isOpen={this.state.modal} toggle={this.toggle.bind(this)} >\r\n            <ModalHeader toggle={this.toggle.bind(this)}>Thêm Sản Phẩm</ModalHeader>\r\n            <ModalBody>\r\n              <FormGroup>\r\n                <Label htmlFor=''>Sản Phẩm</Label>\r\n                  <Select \r\n                    options={products}\r\n                    onChange={this.handleSeletion.bind(this)}\r\n                    isMulti = {false}\r\n                    name=\"product\"\r\n                  />\r\n              </FormGroup>\r\n              <FormGroup>\r\n                <Label htmlFor=''>Đơn Vị</Label>\r\n                  <Select \r\n                      options={specUnitSelection}\r\n                      onChange={this.handleSeletion.bind(this)}\r\n                      isMulti = {false}\r\n                      name=\"specUnit\"\r\n                    />\r\n              </FormGroup>\r\n              <FormGroup>\r\n                <Label htmlFor=''>Số Lượng</Label>\r\n                <Input invalid={this.state.invalid} name='amount' onChange={this.changeHandler.bind(this)} value={this.state.amount} type=\"number\"/>\r\n                <FormFeedback>Xin lỗi! vui lòng nhập số lượng nhỏ hơn {amount}</FormFeedback>\r\n              </FormGroup>\r\n            </ModalBody>\r\n            <ModalFooter>\r\n              <Button color=\"primary\" onClick={this.addImport.bind(this)}>Lưu và Tiếp Tục</Button>{' '}\r\n              <Button color=\"warning\" onClick={this.addImportAndExit.bind(this)}>Lưu và Thoát</Button>{' '}\r\n              <Button color=\"secondary\" onClick={this.toggle.bind(this)}>Thoát</Button>\r\n            </ModalFooter>\r\n          </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  requestReducer: state.requestReducer,\r\n  authenReducer: state.auth,\r\n\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  onGetAllProduct: (branch) => {\r\n    return dispatch(getAllProduct(branch));\r\n  },\r\n  onGetSpecUnit: (id) => {\r\n     return dispatch(getSpecUnit(id))\r\n  },\r\n  onSave: (data, branch) => {\r\n    // return dispatch(save(data, branch));\r\n  },\r\n  onResetSaveSuccess: () => {\r\n    // return dispatch(resetSaveSuccess());\r\n  },\r\n  onGetAmountProduct: (id, branchId) => {\r\n    return dispatch(getAmountProduct(id, branchId))\r\n  }\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TableRequest)\r\n"]},"metadata":{},"sourceType":"module"}