{"ast":null,"code":"import _objectSpread from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport { ACTION_TYPES } from '../constants';\nimport _ from 'lodash';\nvar initState = {\n  errors: \"\",\n  authentication: {},\n  isLogin: false,\n  nav: [],\n  user: {},\n  authorities: [],\n  isChooseBranch: false,\n  branch: {},\n  branchs: []\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ACTION_TYPES.AUTH.LOGIN_SUCCESS:\n      var payload = action.payload;\n\n      if (payload.branchs) {\n        if (payload.branchs.length > 1) {\n          return _objectSpread({}, state, {\n            authentication: payload.authentication,\n            isLogin: true,\n            nav: payload.nav,\n            user: payload.user,\n            authorities: payload.authorities,\n            isChooseBranch: true,\n            branchs: payload.branchs\n          });\n        } else {\n          navBranch(payload.nav, payload.branchs[0]);\n          return _objectSpread({}, state, {\n            authentication: payload.authentication,\n            isLogin: true,\n            nav: payload.nav,\n            user: payload.user,\n            authorities: payload.authorities,\n            isChooseBranch: false,\n            branch: payload.branchs[0]\n          });\n        }\n      } else {\n        return _objectSpread({}, state, {\n          authentication: payload.authentication,\n          isLogin: true,\n          nav: payload.nav,\n          user: payload.user,\n          authorities: payload.authorities\n        });\n      }\n\n    case ACTION_TYPES.AUTH.SET_BRANCH:\n      return _objectSpread({}, state, {\n        branch: action.payload\n      });\n\n    case ACTION_TYPES.AUTH.LOGOUT:\n      return initState;\n\n    default:\n      return state;\n  }\n});\n\nvar navBranch = function navBranch(navs, branch) {\n  var befor = _.remove(navs, function (nav) {\n    console.log(branch.isMain);\n\n    if (branch.isMain === true) {\n      if (nav.url === \"/bill/accept-request-products\") {\n        return nav;\n      }\n    } else {\n      if (nav.url === \"/bill/request-products\") {\n        return nav;\n      }\n    }\n  });\n\n  console.log(befor);\n};","map":{"version":3,"sources":["D:\\LV\\qlt\\qlt_web\\src\\reducers\\authReducer.js"],"names":["ACTION_TYPES","_","initState","errors","authentication","isLogin","nav","user","authorities","isChooseBranch","branch","branchs","state","action","type","AUTH","LOGIN_SUCCESS","payload","length","navBranch","SET_BRANCH","LOGOUT","navs","befor","remove","console","log","isMain","url"],"mappings":"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","sourcesContent":["import {ACTION_TYPES} from '../constants';\r\nimport _ from 'lodash';\r\nconst initState  = {\r\n  errors:\"\",\r\n  authentication:{},\r\n  isLogin: false,\r\n  nav:[],\r\n  user: {},\r\n  authorities: [],\r\n  isChooseBranch: false,\r\n  branch:{},\r\n  branchs:[]\r\n};\r\nexport default (state = initState, action) => {\r\n  switch (action.type) {\r\n    case ACTION_TYPES.AUTH.LOGIN_SUCCESS:\r\n      const payload = action.payload;\r\n      if(payload.branchs) {\r\n        if(payload.branchs.length > 1) {\r\n          \r\n          return {...state, \r\n            authentication: payload.authentication, \r\n            isLogin: true, \r\n            nav: payload.nav, \r\n            user: payload.user,\r\n            authorities: payload.authorities,\r\n            isChooseBranch: true,\r\n            branchs: payload.branchs\r\n          };\r\n        } else {\r\n          navBranch(payload.nav, payload.branchs[0]);\r\n          return {...state, \r\n            authentication: payload.authentication, \r\n            isLogin: true, \r\n            nav: payload.nav, \r\n            user: payload.user,\r\n            authorities: payload.authorities,\r\n            isChooseBranch: false,\r\n            branch: payload.branchs[0]\r\n          };\r\n        }\r\n      } else {\r\n        return {...state, \r\n          authentication: payload.authentication, \r\n          isLogin: true, \r\n          nav: payload.nav, \r\n          user: payload.user,\r\n          authorities: payload.authorities\r\n        };\r\n      }\r\n\r\n    case ACTION_TYPES.AUTH.SET_BRANCH: \r\n      return {...state, branch: action.payload}\r\n    \r\n    case ACTION_TYPES.AUTH.LOGOUT:\r\n      return initState;\r\n    \r\n    default:\r\n      return state;\r\n  }\r\n}\r\nconst navBranch = (navs, branch) => {\r\n  const befor = _.remove(navs, function(nav) {\r\n    console.log(branch.isMain);\r\n    if(branch.isMain === true) {\r\n      if(nav.url === \"/bill/accept-request-products\") {\r\n        return nav;\r\n      }\r\n    } else {\r\n      if(nav.url === \"/bill/request-products\") {\r\n        return nav;\r\n      }\r\n    }\r\n  });\r\n  console.log(befor);\r\n\r\n}"]},"metadata":{},"sourceType":"module"}