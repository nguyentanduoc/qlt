{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\src\\\\views\\\\Bill\\\\Request\\\\TableRequest.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport DatePicker from 'react-datepicker';\nimport AlertCommon from '../../Common/AlertCommon';\nimport { Table } from 'antd';\nimport Select from 'react-select';\nimport { getAllProduct, getUnit, getAmountProduct, save, resetSaveSuccess } from '../../../actions/requestProductAction';\nimport { resetAlert } from '../../../actions/alertAction';\nimport { Button, Row, Col, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Label, Input, FormFeedback, InputGroup, InputGroupAddon, InputGroupText, Card, CardHeader, CardBody } from 'reactstrap';\nimport CardFooter from \"reactstrap/es/CardFooter\";\nvar columns = [{\n  title: 'Tên Sản Phẩm',\n  dataIndex: 'product',\n  key: 'product'\n}, {\n  title: 'Số Lượng',\n  dataIndex: 'amount',\n  key: 'amount'\n}, {\n  title: 'Đơn Vị',\n  dataIndex: 'unit',\n  key: 'unit'\n}];\nexport var TableRequest =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TableRequest, _Component);\n\n  function TableRequest(props) {\n    var _this;\n\n    _classCallCheck(this, TableRequest);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TableRequest).call(this, props));\n\n    _this.onAddProduct = function (e) {\n      e.preventDefault();\n\n      _this.toggle();\n    };\n\n    _this.toggle = function () {\n      _this.setState({\n        modal: !_this.state.modal\n      });\n    };\n\n    _this.handleSelections = function (e, selection) {\n      switch (selection.name) {\n        case 'product':\n          _this.props.onGetUnit(e.value);\n\n          _this.props.onGetAmountProduct(e.value, _this.props.authenReducer.branch.id);\n\n          _this.setState({\n            product: e\n          });\n\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    _this.changeHandler = function (e) {\n      var name = e.target.name;\n      var value = e.target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.addImport =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var _this$state, data, dataView;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _context.next = 3;\n                return _this.setState({\n                  unit: _this.props.requestReducer.unit\n                });\n\n              case 3:\n                if (_this.state.amount > _this.props.requestReducer.amount) {\n                  _this.setState({\n                    invalid: true\n                  });\n                } else {\n                  _this$state = _this.state, data = _this$state.data, dataView = _this$state.dataView;\n                  data.push({\n                    product: _this.state.product,\n                    unit: _this.state.unit,\n                    amount: _this.state.amount\n                  });\n                  dataView.push({\n                    product: _this.state.product.label,\n                    unit: _this.state.unit.unitName,\n                    amount: _this.state.amount\n                  });\n\n                  _this.setState({\n                    data: data,\n                    dataView: dataView,\n                    invalid: false\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.addImportAndExit = function (e) {\n      _this.addImport(e);\n\n      _this.toggle();\n    };\n\n    _this.onSave = function (e) {\n      e.preventDefault();\n\n      _this.props.onSave(_this.state.data, _this.props.authenReducer.branch, _this.state.noteRequest);\n    };\n\n    _this.checkEmpty = function (str) {\n      return !str || 0 === str.length;\n    };\n\n    _this.state = {\n      data: [],\n      dataView: [],\n      modal: false,\n      product: {},\n      unit: {},\n      amount: 0,\n      createBillDate: new Date(),\n      invalid: false,\n      noteRequest: ''\n    };\n    return _this;\n  }\n\n  _createClass(TableRequest, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      console.log(this.props.requestReducer.flgSaveSuccess);\n\n      if (this.props.requestReducer.flgSaveSuccess) {\n        this.setState({\n          data: [],\n          dataView: []\n        });\n        this.props.onResetSaveSuccess();\n      }\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.onGetAllProduct(this.props.authenReducer.branch);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.onResetAlert();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$requestRe = this.props.requestReducer,\n          products = _this$props$requestRe.products,\n          unit = _this$props$requestRe.unit,\n          amount = _this$props$requestRe.amount;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: '8',\n        md: '8',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Chi Ti\\u1EBFt Y\\xEAu C\\u1EA7u\")), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.onAddProduct.bind(this),\n        size: \"sm\",\n        color: \"primary\",\n        className: \"btn-brand\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Th\\xEAm S\\u1EA3n Ph\\u1EA9m\")), ' ', React.createElement(Table, {\n        dataSource: this.state.dataView,\n        columns: columns,\n        rowKey: \"product\",\n        bordered: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      })))), React.createElement(Col, {\n        xs: '4',\n        md: '4',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"Th\\xF4ng tin Y\\xEAu C\\u1EA7u\")), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(AlertCommon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Label, {\n        htmlFor: \"dateCreated\",\n        className: \"pr-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Ng\\xE0y Y\\xEAu C\\u1EA7u\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), React.createElement(DatePicker, {\n        disabled: true,\n        className: \"form-control\",\n        selected: this.state.createBillDate,\n        dateFormat: \"dd/MM/yyyy\",\n        name: \"dateCreated\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(Label, {\n        htmlFor: \"noteRequest\",\n        className: \"pr-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Ghi Ch\\xFA Phi\\u1EBFu Y\\xEAu C\\u1EA7u\"), React.createElement(Input, {\n        type: \"textarea\",\n        name: \"noteRequest\",\n        id: \"noteRequest\",\n        placeholder: \"Ghi ch\\xFA y\\xEAu c\\u1EA7u\",\n        required: true,\n        onChange: this.changeHandler.bind(this),\n        value: this.checkEmpty(this.state.noteRequest) === true ? \"\" : this.state.noteRequest,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }))), React.createElement(CardFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(Button, {\n        size: \"sm\",\n        color: \"success\",\n        onClick: this.onSave.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-dot-circle-o\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), ' ', \"Y\\xEAu C\\u1EA7u\"))))), React.createElement(Modal, {\n        isOpen: this.state.modal,\n        toggle: this.toggle.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        toggle: this.toggle.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Th\\xEAm S\\u1EA3n Ph\\u1EA9m\"), React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(Label, {\n        htmlFor: \"product\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"S\\u1EA3n Ph\\u1EA9m\"), React.createElement(Select, {\n        options: products,\n        onChange: this.handleSelections.bind(this),\n        isMulti: false,\n        name: \"product\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      })), React.createElement(Label, {\n        htmlFor: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"S\\u1ED1 L\\u01B0\\u1EE3ng\"), React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(Input, {\n        invalid: this.state.invalid,\n        name: \"amount\",\n        onChange: this.changeHandler.bind(this),\n        value: this.state.amount,\n        type: \"number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }), React.createElement(FormFeedback, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \"Xin l\\u1ED7i! vui l\\xF2ng nh\\u1EADp s\\u1ED1 l\\u01B0\\u1EE3ng nh\\u1ECF h\\u01A1n \", amount), React.createElement(InputGroupAddon, {\n        addonType: \"append\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(InputGroupText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, unit.unitName))), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      })), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.addImport.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"L\\u01B0u v\\xE0 Ti\\u1EBFp T\\u1EE5c\"), ' ', React.createElement(Button, {\n        color: \"warning\",\n        onClick: this.addImportAndExit.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"L\\u01B0u v\\xE0 Tho\\xE1t\"), ' ', React.createElement(Button, {\n        color: \"secondary\",\n        onClick: this.toggle.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, \"Tho\\xE1t\"))));\n    }\n  }]);\n\n  return TableRequest;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    requestReducer: state.requestReducer,\n    authenReducer: state.auth\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onGetAllProduct: function onGetAllProduct(branch) {\n      return dispatch(getAllProduct(branch));\n    },\n    onGetUnit: function onGetUnit(id) {\n      return dispatch(getUnit(id));\n    },\n    onSave: function onSave(data, branch, noteRequest) {\n      return dispatch(save(data, branch, noteRequest));\n    },\n    onResetSaveSuccess: function onResetSaveSuccess() {\n      return dispatch(resetSaveSuccess());\n    },\n    onGetAmountProduct: function onGetAmountProduct(id, branchId) {\n      return dispatch(getAmountProduct(id, branchId));\n    },\n    onResetAlert: function onResetAlert() {\n      return dispatch(resetAlert());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TableRequest);","map":{"version":3,"sources":["D:\\LV\\qlt\\qlt_web\\src\\views\\Bill\\Request\\TableRequest.js"],"names":["React","Component","connect","DatePicker","AlertCommon","Table","Select","getAllProduct","getUnit","getAmountProduct","save","resetSaveSuccess","resetAlert","Button","Row","Col","Modal","ModalHeader","ModalBody","ModalFooter","FormGroup","Label","Input","FormFeedback","InputGroup","InputGroupAddon","InputGroupText","Card","CardHeader","CardBody","CardFooter","columns","title","dataIndex","key","TableRequest","props","onAddProduct","e","preventDefault","toggle","setState","modal","state","handleSelections","selection","name","onGetUnit","value","onGetAmountProduct","authenReducer","branch","id","product","changeHandler","target","addImport","unit","requestReducer","amount","invalid","data","dataView","push","label","unitName","addImportAndExit","onSave","noteRequest","checkEmpty","str","length","createBillDate","Date","console","log","flgSaveSuccess","onResetSaveSuccess","onGetAllProduct","onResetAlert","products","bind","mapStateToProps","auth","mapDispatchToProps","dispatch","branchId"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport DatePicker from 'react-datepicker'\nimport AlertCommon from '../../Common/AlertCommon'\nimport {Table} from 'antd'\nimport Select from 'react-select'\nimport {getAllProduct, getUnit, getAmountProduct, save, resetSaveSuccess} from '../../../actions/requestProductAction'\nimport {resetAlert} from '../../../actions/alertAction';\nimport {\n  Button,\n  Row,\n  Col,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  FormGroup,\n  Label,\n  Input,\n  FormFeedback,\n  InputGroup,\n  InputGroupAddon,\n  InputGroupText,\n  Card,\n  CardHeader,\n  CardBody\n} from 'reactstrap'\nimport CardFooter from \"reactstrap/es/CardFooter\";\n\nconst columns = [\n  {\n    title: 'Tên Sản Phẩm',\n    dataIndex: 'product',\n    key: 'product',\n  }, {\n    title: 'Số Lượng',\n    dataIndex: 'amount',\n    key: 'amount',\n  }, {\n    title: 'Đơn Vị',\n    dataIndex: 'unit',\n    key: 'unit',\n  }\n]\n\nexport class TableRequest extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      dataView: [],\n      modal: false,\n      product: {},\n      unit: {},\n      amount: 0,\n      createBillDate: new Date(),\n      invalid: false,\n      noteRequest: ''\n    }\n  }\n\n  onAddProduct = (e) => {\n    e.preventDefault();\n    this.toggle();\n  }\n  toggle = () => {\n    this.setState({\n      modal: !this.state.modal,\n    });\n  }\n  handleSelections = (e, selection) => {\n    switch (selection.name) {\n\n      case 'product':\n        this.props.onGetUnit(e.value);\n        this.props.onGetAmountProduct(e.value, this.props.authenReducer.branch.id);\n        this.setState({product: e});\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  changeHandler = (e) => {\n    const name = e.target.name;\n    const value = e.target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  addImport = async (e) => {\n    e.preventDefault();\n    await this.setState({unit: this.props.requestReducer.unit});\n    if (this.state.amount > this.props.requestReducer.amount) {\n      this.setState({invalid: true});\n    } else {\n      let {data, dataView} = this.state;\n      data.push({\n        product: this.state.product,\n        unit: this.state.unit,\n        amount: this.state.amount\n      });\n      dataView.push({\n        product: this.state.product.label,\n        unit: this.state.unit.unitName,\n        amount: this.state.amount\n      });\n      this.setState({data: data, dataView: dataView, invalid: false});\n    }\n  }\n\n  addImportAndExit = (e) => {\n    this.addImport(e);\n    this.toggle();\n  }\n\n  onSave = (e) => {\n    e.preventDefault();\n    this.props.onSave(this.state.data, this.props.authenReducer.branch, this.state.noteRequest);\n  }\n\n  componentDidUpdate() {\n    console.log(this.props.requestReducer.flgSaveSuccess);\n    if (this.props.requestReducer.flgSaveSuccess) {\n      this.setState({data: [], dataView: []});\n      this.props.onResetSaveSuccess();\n    }\n\n  }\n\n  componentWillMount() {\n    this.props.onGetAllProduct(this.props.authenReducer.branch);\n  }\n\n  componentWillUnmount() {\n    this.props.onResetAlert();\n  }\n\n  checkEmpty = (str) => {\n    return (!str || 0 === str.length);\n  }\n\n  render() {\n    const {products, unit, amount} = this.props.requestReducer;\n    return (\n      <div>\n        <Row>\n          <Col xs={'8'} md={'8'}>\n            <Card>\n              <CardHeader>\n                <strong>Chi Tiết Yêu Cầu</strong>\n              </CardHeader>\n              <CardBody>\n                <Button onClick={this.onAddProduct.bind(this)} size=\"sm\" color=\"primary\" className=\"btn-brand\">\n                  <i className=\"fas fa-plus\"></i><span>Thêm Sản Phẩm</span>\n                </Button>{' '}\n                <Table dataSource={this.state.dataView} columns={columns} rowKey='product' bordered={true}/>\n              </CardBody>\n            </Card>\n          </Col>\n          <Col xs={'4'} md={'4'}>\n            <Card>\n              <CardHeader>\n                <strong>Thông tin Yêu Cầu</strong>\n              </CardHeader>\n              <CardBody>\n                <AlertCommon/>\n                <FormGroup>\n                  <Label htmlFor='dateCreated' className='pr-1'>Ngày Yêu Cầu</Label>\n                  <br/>\n                  <DatePicker\n                    disabled={true}\n                    className=\"form-control\"\n                    selected={this.state.createBillDate}\n                    dateFormat=\"dd/MM/yyyy\"\n                    name='dateCreated'/>\n                </FormGroup>\n                <FormGroup>\n                  <Label htmlFor='noteRequest' className='pr-1'>Ghi Chú Phiếu Yêu Cầu</Label>\n                  <Input\n                    type=\"textarea\"\n                    name='noteRequest' id='noteRequest'\n                    placeholder=\"Ghi chú yêu cầu\"\n                    required\n                    onChange={this.changeHandler.bind(this)}\n                    value={this.checkEmpty(this.state.noteRequest) === true ? \"\" : this.state.noteRequest}/>\n                </FormGroup>\n              </CardBody>\n              <CardFooter>\n                <Button size=\"sm\" color=\"success\" onClick={this.onSave.bind(this)}>\n                  <i className=\"fa fa-dot-circle-o\"></i>{' '}Yêu Cầu</Button>\n              </CardFooter>\n            </Card>\n          </Col>\n        </Row>\n        <Modal isOpen={this.state.modal} toggle={this.toggle.bind(this)}>\n          <ModalHeader toggle={this.toggle.bind(this)}>Thêm Sản Phẩm</ModalHeader>\n          <ModalBody>\n            <FormGroup>\n              <Label htmlFor='product'>Sản Phẩm</Label>\n              <Select\n                options={products}\n                onChange={this.handleSelections.bind(this)}\n                isMulti={false}\n                name=\"product\"\n              />\n            </FormGroup>\n            <Label htmlFor=''>Số Lượng</Label>\n            <InputGroup>\n              <Input invalid={this.state.invalid} name='amount' onChange={this.changeHandler.bind(this)}\n                     value={this.state.amount} type=\"number\"/>\n              <FormFeedback>Xin lỗi! vui lòng nhập số lượng nhỏ hơn {amount}</FormFeedback>\n              <InputGroupAddon addonType=\"append\">\n                <InputGroupText>\n                  {unit.unitName}\n                </InputGroupText>\n              </InputGroupAddon>\n            </InputGroup>\n            <FormGroup>\n            </FormGroup>\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"primary\" onClick={this.addImport.bind(this)}>Lưu và Tiếp Tục</Button>{' '}\n            <Button color=\"warning\" onClick={this.addImportAndExit.bind(this)}>Lưu và Thoát</Button>{' '}\n            <Button color=\"secondary\" onClick={this.toggle.bind(this)}>Thoát</Button>\n          </ModalFooter>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  requestReducer: state.requestReducer,\n  authenReducer: state.auth,\n\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  onGetAllProduct: (branch) => {\n    return dispatch(getAllProduct(branch));\n  },\n  onGetUnit: (id) => {\n    return dispatch(getUnit(id))\n  },\n  onSave: (data, branch, noteRequest) => {\n    return dispatch(save(data, branch, noteRequest));\n  },\n  onResetSaveSuccess: () => {\n    return dispatch(resetSaveSuccess());\n  },\n  onGetAmountProduct: (id, branchId) => {\n    return dispatch(getAmountProduct(id, branchId))\n  },\n  onResetAlert: () => {\n    return dispatch(resetAlert());\n  }\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TableRequest)\n"]},"metadata":{},"sourceType":"module"}