{"ast":null,"code":"import _objectSpread from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport { ACTION_TYPES } from '../constants';\nimport _ from 'lodash';\nvar initState = {\n  errors: \"\",\n  authentication: {},\n  isLogin: false,\n  nav: [],\n  user: {},\n  authorities: [],\n  isChooseBranch: false,\n  branch: {},\n  branches: []\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ACTION_TYPES.AUTH.LOGIN_SUCCESS:\n      var payload = action.payload;\n\n      if (payload.branchs) {\n        if (payload.branchs.length > 1) {\n          return _objectSpread({}, state, {\n            authentication: payload.authentication,\n            isLogin: true,\n            nav: payload.nav,\n            user: payload.user,\n            authorities: payload.authorities,\n            isChooseBranch: true,\n            branches: payload.branchs\n          });\n        } else {\n          navBranch(payload.nav, payload.branchs[0]);\n          return _objectSpread({}, state, {\n            authentication: payload.authentication,\n            isLogin: true,\n            nav: payload.nav,\n            user: payload.user,\n            authorities: payload.authorities,\n            isChooseBranch: false,\n            branch: payload.branchs[0]\n          });\n        }\n      } else {\n        return _objectSpread({}, state, {\n          authentication: payload.authentication,\n          isLogin: true,\n          nav: payload.nav,\n          user: payload.user,\n          authorities: payload.authorities\n        });\n      }\n\n    case ACTION_TYPES.AUTH.SET_BRANCH:\n      var nav = navBranch(payload.nav, action.payload);\n      return _objectSpread({}, state, {\n        branch: action.payload,\n        nav: nav\n      });\n\n    case ACTION_TYPES.AUTH.LOGOUT:\n      return initState;\n\n    default:\n      return state;\n  }\n});\n\nvar navBranch = function navBranch(navs, branch) {\n  navs.forEach(function (element) {\n    if (element.url === \"/bill\") {\n      _.remove(element.children, function (nav) {\n        if (nav.isMain) {\n          if (branch.isMain !== nav.isMain) {\n            return nav;\n          } else {\n            console.log(nav);\n          }\n        }\n      });\n    }\n  });\n};","map":{"version":3,"sources":["D:\\LV\\qlt\\qlt_web\\src\\reducers\\authReducer.js"],"names":["ACTION_TYPES","_","initState","errors","authentication","isLogin","nav","user","authorities","isChooseBranch","branch","branches","state","action","type","AUTH","LOGIN_SUCCESS","payload","branchs","length","navBranch","SET_BRANCH","LOGOUT","navs","forEach","element","url","remove","children","isMain","console","log"],"mappings":"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","sourcesContent":["import {ACTION_TYPES} from '../constants';\nimport _ from 'lodash';\nconst initState  = {\n  errors:\"\",\n  authentication:{},\n  isLogin: false,\n  nav:[],\n  user: {},\n  authorities: [],\n  isChooseBranch: false,\n  branch:{},\n  branches:[]\n};\nexport default (state = initState, action) => {\n  switch (action.type) {\n    case ACTION_TYPES.AUTH.LOGIN_SUCCESS:\n      const payload = action.payload;\n      if(payload.branchs) {\n        if(payload.branchs.length > 1) {\n          return {...state, \n            authentication: payload.authentication, \n            isLogin: true, \n            nav: payload.nav, \n            user: payload.user,\n            authorities: payload.authorities,\n            isChooseBranch: true,\n            branches: payload.branchs\n          };\n        } else {\n          navBranch(payload.nav, payload.branchs[0]);\n          return {...state, \n            authentication: payload.authentication, \n            isLogin: true, \n            nav: payload.nav, \n            user: payload.user,\n            authorities: payload.authorities,\n            isChooseBranch: false,\n            branch: payload.branchs[0]\n          };\n        }\n      } else {\n        return {...state, \n          authentication: payload.authentication, \n          isLogin: true, \n          nav: payload.nav, \n          user: payload.user,\n          authorities: payload.authorities\n        };\n      }\n\n    case ACTION_TYPES.AUTH.SET_BRANCH:\n      const nav = navBranch(payload.nav, action.payload);\n      return {...state, branch: action.payload, nav: nav}\n    \n    case ACTION_TYPES.AUTH.LOGOUT:\n      return initState;\n    \n    default:\n      return state;\n  }\n}\nconst navBranch = (navs, branch) => {\n  navs.forEach(element => {\n    if(element.url === \"/bill\") {\n      _.remove(element.children, function(nav) {\n        if(nav.isMain) {\n          if(branch.isMain !== nav.isMain){\n            return nav;\n          } else {\n            console.log(nav);\n          }\n        }\n      });\n    }\n  });\n}\n"]},"metadata":{},"sourceType":"module"}