{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\src\\\\views\\\\Branch\\\\FormBranch.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { save, resetBranch, selectAllShop } from '../../actions/branchAction';\nimport AlertCommon from '../Common/AlertCommon';\nimport { resetAlert } from '../../actions/alertAction';\nimport _ from 'lodash';\nimport { Button, Card, CardBody, CardFooter, CardHeader, Col, FormGroup, Input, CustomInput, Label, Row, Form } from 'reactstrap';\n\nvar FormBranch =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FormBranch, _Component);\n\n  function FormBranch(props) {\n    var _this;\n\n    _classCallCheck(this, FormBranch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FormBranch).call(this, props));\n\n    _this.changeHandler = function (e) {\n      var name = e.target.name;\n      var value = e.target.value;\n\n      if (e.target.type === 'checkbox') {\n        if (name === 'isEnabled') {\n          _this.setState({\n            isEnabled: !_this.state.isEnabled\n          });\n        }\n\n        if (name === 'isMain') {\n          _this.setState({\n            isMain: !_this.state.isMain\n          });\n        }\n      } else {\n        _this.setState(_defineProperty({}, name, value));\n      }\n    };\n\n    _this.handleSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n\n                _this.props.onSave(_this.state);\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleReset = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        id: '',\n        latitude: '',\n        longitude: '',\n        name: '',\n        address: '',\n        isEnabled: true,\n        isMain: false\n      });\n\n      _this.getLocation();\n    };\n\n    _this.checkEmpty = function (str) {\n      return !str || 0 === str.length;\n    };\n\n    _this.state = {\n      id: '',\n      latitude: '',\n      longitude: '',\n      name: '',\n      address: '',\n      isEnabled: true,\n      idDirector: _this.props.authReducer.user.id,\n      isMain: false\n    };\n    return _this;\n  }\n\n  _createClass(FormBranch, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.onSelectAllShop();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getLocation();\n    }\n  }, {\n    key: \"getLocation\",\n    value: function getLocation() {\n      var _this2 = this;\n\n      var location = window.navigator && window.navigator.geolocation;\n\n      if (location) {\n        location.getCurrentPosition(function (position) {\n          _this2.setState({\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude\n          });\n        }, function () {\n          _this2.setState({\n            latitude: 'err-latitude',\n            longitude: 'err-longitude'\n          });\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.onResetAlert();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.props.branchReducer.flgSet) {\n        var branch = this.props.branchReducer.branch;\n        this.setState({\n          id: branch.id,\n          latitude: branch.latitude,\n          longitude: branch.longitude,\n          name: branch.name,\n          address: branch.address,\n          isEnabled: branch.isEnabled\n        });\n        this.props.onResetBranch();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var enabledSwithMainBranch = function enabledSwithMainBranch() {\n        var branchs = _this3.props.branchReducer.branchs;\n        console.log(_.findIndex(branchs, function (o) {\n          return o.isMain === true;\n        }));\n      };\n\n      return React.createElement(Form, {\n        onSubmit: this.handleSubmit.bind(this),\n        onReset: this.handleReset.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Chi Nh\\xE1nh\")), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(AlertCommon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: 'hidden',\n        name: \"id\",\n        id: \"id\",\n        value: this.state.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Label, {\n        htmlFor: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"T\\xEAn Chi Nh\\xE1nh\"), React.createElement(Input, {\n        type: \"text\",\n        id: \"name\",\n        name: \"name\",\n        placeholder: \"T\\xEAn Chi Nh\\xE1nh\",\n        required: true,\n        onChange: this.changeHandler.bind(this),\n        value: this.state.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Label, {\n        htmlFor: \"address \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"\\u0110\\u1ECBa ch\\u1EC9\"), React.createElement(Input, {\n        type: \"textarea\",\n        id: \"address\",\n        name: \"address\",\n        placeholder: \"\\u0110\\u1ECBa ch\\u1EC9\",\n        required: true,\n        onChange: this.changeHandler.bind(this),\n        value: this.checkEmpty(this.state.address) === true ? \"\" : this.state.address,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(Label, {\n        htmlFor: \"longitude\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Kinh \\u0110\\u1ED9\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"lon\",\n        id: \"lon\",\n        disabled: true,\n        value: this.state.longitude,\n        required: true,\n        onChange: this.changeHandler.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        xs: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(Label, {\n        htmlFor: \"latitude\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"V\\u0129 \\u0110\\u1ED9\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"lat\",\n        id: \"lat\",\n        disabled: true,\n        value: this.state.latitude,\n        required: true,\n        onChange: this.changeHandler.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Chi Nh\\xE1nh Ch\\xEDnh\")), React.createElement(Col, {\n        md: \"6\",\n        xs: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(CustomInput, {\n        disabled: enabledSwithMainBranch(),\n        type: \"switch\",\n        id: \"isMain\",\n        label: \"Ho\\u1EA1t \\u0111\\u1ED9ng\",\n        name: \"isMain\",\n        checked: this.state.isMain,\n        onChange: this.changeHandler.bind(this),\n        value: this.state.isMain,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"Ho\\u1EA1t \\u0111\\u1ED9ng\")), React.createElement(Col, {\n        md: \"6\",\n        xs: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(CustomInput, {\n        type: \"switch\",\n        id: \"isEnabled\",\n        label: \"Ho\\u1EA1t \\u0111\\u1ED9ng\",\n        name: \"isEnabled\",\n        checked: this.state.isEnabled,\n        onChange: this.changeHandler.bind(this),\n        value: this.state.isEnabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      })))), React.createElement(CardFooter, {\n        className: \"text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"submit\",\n        size: \"sm\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-dot-circle-o\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), \" L\\u01B0u\"), \" \", ' ', React.createElement(Button, {\n        type: \"reset\",\n        size: \"sm\",\n        color: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-ban\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }), \" L\\xE0m R\\u1ED7ng\"))));\n    }\n  }]);\n\n  return FormBranch;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    alertReducer: state.alertReducer,\n    branchReducer: state.branchReducer,\n    authReducer: state.auth\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onSave: function onSave(branch) {\n      return dispatch(save(branch));\n    },\n    onResetAlert: function onResetAlert() {\n      return dispatch(resetAlert());\n    },\n    onResetBranch: function onResetBranch() {\n      return dispatch(resetBranch());\n    },\n    onSelectAllShop: function onSelectAllShop() {\n      return dispatch(selectAllShop());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FormBranch);","map":{"version":3,"sources":["D:\\LV\\qlt\\qlt_web\\src\\views\\Branch\\FormBranch.js"],"names":["React","Component","connect","save","resetBranch","selectAllShop","AlertCommon","resetAlert","_","Button","Card","CardBody","CardFooter","CardHeader","Col","FormGroup","Input","CustomInput","Label","Row","Form","FormBranch","props","changeHandler","e","name","target","value","type","setState","isEnabled","state","isMain","handleSubmit","preventDefault","onSave","handleReset","id","latitude","longitude","address","getLocation","checkEmpty","str","length","idDirector","authReducer","user","onSelectAllShop","location","window","navigator","geolocation","getCurrentPosition","position","coords","onResetAlert","branchReducer","flgSet","branch","onResetBranch","enabledSwithMainBranch","branchs","console","log","findIndex","o","bind","mapStateToProps","alertReducer","auth","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { save, resetBranch, selectAllShop } from '../../actions/branchAction'\r\nimport AlertCommon from '../Common/AlertCommon'\r\nimport { resetAlert } from  '../../actions/alertAction'\r\nimport _ from 'lodash'\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  CardHeader,\r\n  Col,\r\n  FormGroup,\r\n  Input,\r\n  CustomInput,\r\n  Label,\r\n  Row,\r\n  Form,\r\n} from 'reactstrap'\r\n\r\nclass FormBranch extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      id: '',\r\n      latitude: '',\r\n      longitude: '',\r\n      name: '',\r\n      address: '',\r\n      isEnabled: true,\r\n      idDirector: this.props.authReducer.user.id,\r\n      isMain: false\r\n    }\r\n  }\r\n  componentWillMount(){\r\n    this.props.onSelectAllShop();\r\n  }\r\n  componentDidMount(){\r\n    this.getLocation();\r\n  }\r\n  getLocation() {\r\n    const location = window.navigator && window.navigator.geolocation\r\n    if (location) {\r\n      location.getCurrentPosition((position) => {\r\n        this.setState({\r\n          latitude: position.coords.latitude,\r\n          longitude: position.coords.longitude,\r\n        })\r\n      }, () => {\r\n        this.setState({ latitude: 'err-latitude', longitude: 'err-longitude' })\r\n      })\r\n    }\r\n  }\r\n  changeHandler = (e) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n    if (e.target.type === 'checkbox') {\r\n      if(name === 'isEnabled'){\r\n        this.setState({\r\n          isEnabled: !this.state.isEnabled\r\n        });\r\n      }\r\n      if(name === 'isMain'){\r\n        this.setState({\r\n          isMain: !this.state.isMain\r\n        });\r\n      }\r\n    } else {\r\n      this.setState({\r\n        [name]: value\r\n      });\r\n    }\r\n  }\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    this.props.onSave(this.state);\r\n  }\r\n  handleReset = (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      id:'',\r\n      latitude: '',\r\n      longitude: '',\r\n      name:'',\r\n      address:'',\r\n      isEnabled:true,\r\n      isMain: false\r\n    });\r\n    this.getLocation();\r\n  }\r\n  componentWillUnmount(){\r\n    this.props.onResetAlert();\r\n  }\r\n  componentDidUpdate(){\r\n    if(this.props.branchReducer.flgSet) {\r\n      let branch = this.props.branchReducer.branch;\r\n      this.setState({\r\n        id: branch.id,\r\n        latitude: branch.latitude,\r\n        longitude: branch.longitude,\r\n        name:branch.name,\r\n        address:branch.address,\r\n        isEnabled:branch.isEnabled\r\n      });\r\n      this.props.onResetBranch();\r\n    }\r\n  }\r\n  checkEmpty = (str) => {\r\n    return (!str || 0 === str.length);\r\n  }\r\n  render() {\r\n    const enabledSwithMainBranch = () => {\r\n      const branchs = this.props.branchReducer.branchs;\r\n        console.log(_.findIndex(branchs, function(o){\r\n        return o.isMain === true }));\r\n    }\r\n    return (\r\n      <Form onSubmit={this.handleSubmit.bind(this)} onReset={this.handleReset.bind(this)}>\r\n        <Card>\r\n          <CardHeader>\r\n            <strong>Chi Nhánh</strong>\r\n          </CardHeader>\r\n          <CardBody>\r\n          <AlertCommon/>\r\n            <Row>\r\n              <Col xs=\"12\">\r\n                <Input type={'hidden'} name='id' id='id' value={this.state.id}/>\r\n                <FormGroup>\r\n                  <Label htmlFor=\"name\">Tên Chi Nhánh</Label>\r\n                  <Input \r\n                    type=\"text\" \r\n                    id=\"name\" \r\n                    name=\"name\" \r\n                    placeholder=\"Tên Chi Nhánh\" \r\n                    required \r\n                    onChange={this.changeHandler.bind(this)}\r\n                    value={this.state.name}/>\r\n                </FormGroup>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col xs=\"12\">\r\n                <FormGroup>\r\n                  <Label htmlFor=\"address \">Địa chỉ</Label>\r\n                  <Input \r\n                    type=\"textarea\" \r\n                    id=\"address\" \r\n                    name=\"address\" \r\n                    placeholder=\"Địa chỉ\" \r\n                    required \r\n                    onChange={this.changeHandler.bind(this)}\r\n                    value={this.checkEmpty(this.state.address) === true ? \"\" : this.state.address}/>\r\n                </FormGroup>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col xs=\"6\">\r\n                <FormGroup>\r\n                  <Label htmlFor=\"longitude\">Kinh Độ</Label>\r\n                  <Input type=\"text\" name=\"lon\" id=\"lon\" disabled value={this.state.longitude} required onChange={this.changeHandler.bind(this)}/>\r\n                </FormGroup>\r\n              </Col>\r\n              <Col xs=\"6\">\r\n                <FormGroup>\r\n                  <Label htmlFor=\"latitude\">Vĩ Độ</Label>\r\n                  <Input type=\"text\" name=\"lat\" id=\"lat\" disabled value={this.state.latitude} required onChange={this.changeHandler.bind(this)}/>\r\n                </FormGroup>\r\n              </Col>\r\n            </Row>\r\n            <FormGroup row>\r\n                <Col md=\"6\"><Label>Chi Nhánh Chính</Label></Col>\r\n                <Col md=\"6\" xs=\"12\">\r\n                    <CustomInput\r\n                      disabled ={enabledSwithMainBranch()}\r\n                      type=\"switch\"\r\n                      id='isMain'\r\n                      label='Hoạt động'\r\n                      name='isMain'\r\n                      checked={this.state.isMain}\r\n                      onChange={this.changeHandler.bind(this)}\r\n                      value = {this.state.isMain} />\r\n                </Col>\r\n            </FormGroup>\r\n            <FormGroup row>\r\n                <Col md=\"6\"><Label>Hoạt động</Label></Col>\r\n                <Col md=\"6\" xs=\"12\">\r\n                    <CustomInput\r\n                      type=\"switch\"\r\n                      id='isEnabled'\r\n                      label='Hoạt động'\r\n                      name='isEnabled'\r\n                      checked={this.state.isEnabled}\r\n                      onChange={this.changeHandler.bind(this)}\r\n                      value = {this.state.isEnabled} />\r\n                </Col>\r\n            </FormGroup>\r\n          </CardBody>\r\n          <CardFooter className='text-right'>\r\n            <Button type=\"submit\" size=\"sm\" color=\"primary\"><i className=\"fa fa-dot-circle-o\"></i> Lưu</Button> {' '}\r\n            <Button type=\"reset\" size=\"sm\" color=\"danger\" ><i className=\"fa fa-ban\"></i> Làm Rỗng</Button>\r\n          </CardFooter>\r\n        </Card>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  alertReducer: state.alertReducer,\r\n  branchReducer: state.branchReducer,\r\n  authReducer: state.auth\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  onSave: (branch) => {\r\n    return dispatch(save(branch));\r\n  },\r\n  onResetAlert: () =>  {\r\n    return dispatch(resetAlert());\r\n  },\r\n  onResetBranch: ()  => {\r\n    return dispatch(resetBranch());\r\n  },\r\n  onSelectAllShop: () => {\r\n    return dispatch(selectAllShop());\r\n  }\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormBranch)\r\n"]},"metadata":{},"sourceType":"module"}