{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _defineProperty from \"E:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"E:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"E:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\LV\\\\qlt\\\\qlt_web\\\\src\\\\views\\\\Account\\\\FormAccount.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport AlertCommon from '../Common/AlertCommon';\nimport { showAlertFail } from '../../actions/alertAction';\nimport { createAccount, resetUserFordetail } from '../../actions/UserAction';\nimport { Col, Form, Card, CardHeader, CardBody, FormGroup, Label, Input, Button, CardFooter, CustomInput } from 'reactstrap';\nexport var FormAccount =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FormAccount, _Component);\n\n  function FormAccount(props) {\n    var _this;\n\n    _classCallCheck(this, FormAccount);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FormAccount).call(this, props));\n\n    _this.changeHandler =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var name, value, rolesReducer, roles;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                name = event.target.name;\n                value = event.target.value;\n                rolesReducer = _this.props.roleReducer.roles;\n                roles = _this.state.roles;\n\n                if (!(event.target.type === 'checkbox')) {\n                  _context.next = 26;\n                  break;\n                }\n\n                if (!(name === 'isEnabled')) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _this.setState({\n                  isEnabled: event.target.checked\n                });\n\n                _context.next = 24;\n                break;\n\n              case 9:\n                if (event.target.checked) {\n                  _context.next = 18;\n                  break;\n                }\n\n                _context.t0 = _this;\n                _context.next = 13;\n                return _.filter(_this.state.roles, function (o) {\n                  return o.id !== parseInt(name);\n                });\n\n              case 13:\n                _context.t1 = _context.sent;\n                _context.t2 = {\n                  roles: _context.t1\n                };\n\n                _context.t0.setState.call(_context.t0, _context.t2);\n\n                _context.next = 24;\n                break;\n\n              case 18:\n                _context.t3 = roles;\n                _context.next = 21;\n                return _.filter(rolesReducer, function (o) {\n                  return o.id === parseInt(name);\n                })[0];\n\n              case 21:\n                _context.t4 = _context.sent;\n\n                _context.t3.push.call(_context.t3, _context.t4);\n\n                _this.setState({\n                  roles: roles\n                });\n\n              case 24:\n                _context.next = 27;\n                break;\n\n              case 26:\n                _this.setState(_defineProperty({}, name, value));\n\n              case 27:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(e) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                e.preventDefault();\n\n                if (!(_this.state.roles.length !== 0)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                _context2.next = 4;\n                return _this.props.onCreateAccount({\n                  id: _this.state.id,\n                  email: _this.state.email,\n                  username: _this.state.username,\n                  roles: _this.state.roles,\n                  isEnabled: _this.state.isEnabled\n                });\n\n              case 4:\n                _context2.next = 7;\n                break;\n\n              case 6:\n                _this.props.onShowAlertError(\"Chọn quyền cho Tài Khoản\");\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleReset =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(e) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return _this.setState({\n                  id: '',\n                  username: '',\n                  email: '',\n                  isEnabled: true,\n                  roles: [],\n                  validRole: true\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.showUser =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      var user;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              user = _this.props.userReducer.user;\n              _context4.next = 3;\n              return _this.setState({\n                id: user.id,\n                username: user.username,\n                email: user.email,\n                isEnabled: user.isEnabled,\n                roles: user.roles\n              });\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this);\n    }));\n    _this.state = {\n      id: '',\n      username: '',\n      email: '',\n      isEnabled: true,\n      roles: [],\n      validRole: true\n    };\n    return _this;\n  }\n\n  _createClass(FormAccount, [{\n    key: \"componentWillUnmount\",\n    value: function () {\n      var _componentWillUnmount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.props.onResetUserForDetail();\n\n              case 2:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function componentWillUnmount() {\n        return _componentWillUnmount.apply(this, arguments);\n      }\n\n      return componentWillUnmount;\n    }()\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.props.userReducer.flgClickRow) {\n        this.showUser();\n        this.props.onResetUserForDetail();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var checked = function checked(roleId) {\n        var roles = _this2.state.roles.filter(function (role) {\n          return role.id === roleId;\n        });\n\n        return roles[0] ? true : false;\n      };\n\n      return React.createElement(Form, {\n        onSubmit: this.handleSubmit.bind(this),\n        onReset: this.handleReset.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-user-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), \" T\\u1EA1o \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"T\\xE0i Kho\\u1EA3n\")), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(AlertCommon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(Input, {\n        type: \"hidden\",\n        name: \"id\",\n        value: this.state.id,\n        onChange: this.changeHandler.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp\"), React.createElement(Input, {\n        type: \"text\",\n        id: \"username\",\n        name: \"username\",\n        onChange: this.changeHandler.bind(this),\n        required: true,\n        value: this.state.username,\n        disabled: this.state.username === '' ? false : true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Email\"), React.createElement(Input, {\n        type: \"email\",\n        id: \"email\",\n        name: \"email\",\n        onChange: this.changeHandler.bind(this),\n        required: true,\n        value: this.state.email,\n        disabled: this.state.email === '' ? false : true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Quy\\u1EC1n:\")), React.createElement(Col, {\n        md: \"8\",\n        xs: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, this.props.roleReducer.roles.map(function (role) {\n        return React.createElement(CustomInput, {\n          checked: checked(role.id),\n          key: role.id,\n          type: \"checkbox\",\n          id: role.id,\n          label: role.detail,\n          name: role.id,\n          onChange: _this2.changeHandler.bind(_this2),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        });\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Ho\\u1EA1t \\u0111\\u1ED9ng\")), React.createElement(Col, {\n        md: \"8\",\n        xs: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(CustomInput, {\n        type: \"switch\",\n        id: \"isEnabled\",\n        label: \"Ho\\u1EA1t \\u0111\\u1ED9ng\",\n        name: \"isEnabled\",\n        checked: this.state.isEnabled,\n        onChange: this.changeHandler.bind(this),\n        value: this.state.isEnabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      })))), React.createElement(CardFooter, {\n        className: \"text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"submit\",\n        size: \"sm\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-dot-circle-o\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }), \" L\\u01B0u\"), ' ', React.createElement(Button, {\n        type: \"reset\",\n        size: \"sm\",\n        color: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-ban\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), \" H\\u1EE7y\"))));\n    }\n  }]);\n\n  return FormAccount;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    roleReducer: state.role,\n    alertReducer: state.alertReducer,\n    userReducer: state.user\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onShowAlertError: function () {\n      var _onShowAlertError = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(message) {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return dispatch(showAlertFail(message));\n\n              case 2:\n                return _context6.abrupt(\"return\", _context6.sent);\n\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function onShowAlertError(_x4) {\n        return _onShowAlertError.apply(this, arguments);\n      }\n\n      return onShowAlertError;\n    }(),\n    onCreateAccount: function () {\n      var _onCreateAccount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7(account) {\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return dispatch(createAccount(account));\n\n              case 2:\n                return _context7.abrupt(\"return\", _context7.sent);\n\n              case 3:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function onCreateAccount(_x5) {\n        return _onCreateAccount.apply(this, arguments);\n      }\n\n      return onCreateAccount;\n    }(),\n    onResetUserForDetail: function () {\n      var _onResetUserForDetail = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8() {\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return dispatch(resetUserFordetail());\n\n              case 2:\n                return _context8.abrupt(\"return\", _context8.sent);\n\n              case 3:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function onResetUserForDetail() {\n        return _onResetUserForDetail.apply(this, arguments);\n      }\n\n      return onResetUserForDetail;\n    }()\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FormAccount);","map":{"version":3,"sources":["E:\\LV\\qlt\\qlt_web\\src\\views\\Account\\FormAccount.js"],"names":["React","Component","connect","_","AlertCommon","showAlertFail","createAccount","resetUserFordetail","Col","Form","Card","CardHeader","CardBody","FormGroup","Label","Input","Button","CardFooter","CustomInput","FormAccount","props","changeHandler","event","name","target","value","rolesReducer","roleReducer","roles","state","type","setState","isEnabled","checked","filter","o","id","parseInt","push","handleSubmit","e","preventDefault","length","onCreateAccount","email","username","onShowAlertError","handleReset","validRole","showUser","user","userReducer","onResetUserForDetail","flgClickRow","roleId","role","bind","map","detail","mapStateToProps","alertReducer","mapDispatchToProps","dispatch","message","account"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport AlertCommon from '../Common/AlertCommon'\r\nimport { showAlertFail } from '../../actions/alertAction'\r\nimport { createAccount, resetUserFordetail } from '../../actions/UserAction'\r\nimport {\r\n  Col,\r\n  Form,\r\n  Card,\r\n  CardHeader,\r\n  CardBody,\r\n  FormGroup,\r\n  Label,\r\n  Input,\r\n  Button,\r\n  CardFooter,\r\n  CustomInput\r\n  } from 'reactstrap';\r\n\r\nexport class FormAccount extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      id:'',\r\n      username: '',\r\n      email:'',\r\n      isEnabled: true,\r\n      roles: [],\r\n      validRole: true\r\n    }\r\n  }\r\n  changeHandler = async event => {\r\n    const name = event.target.name;\r\n    const value = event.target.value;\r\n    let rolesReducer  = this.props.roleReducer.roles;\r\n    let roles = this.state.roles;\r\n    if (event.target.type === 'checkbox') {\r\n      if(name==='isEnabled') {\r\n        this.setState({isEnabled: event.target.checked});\r\n      } else {\r\n        if (!event.target.checked) {\r\n          this.setState({\r\n            roles: await _.filter(this.state.roles, function(o) { return o.id !== parseInt(name); })\r\n          });\r\n        }\r\n        else {\r\n          roles.push(await _.filter(rolesReducer, (o)=> { return o.id === parseInt(name); })[0]);\r\n          this.setState({\r\n            roles: roles\r\n          })\r\n        }\r\n      }\r\n    } else {\r\n      this.setState({\r\n        [name]: value\r\n      });\r\n    }\r\n  }\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if(this.state.roles.length !== 0){\r\n      await this.props.onCreateAccount({\r\n        id: this.state.id,\r\n        email: this.state.email,\r\n        username: this.state.username,\r\n        roles: this.state.roles,\r\n        isEnabled: this.state.isEnabled\r\n      });\r\n    } else {\r\n      this.props.onShowAlertError(\"Chọn quyền cho Tài Khoản\");\r\n    }\r\n  }\r\n  handleReset = async (e) => {\r\n    await this.setState({\r\n      id: '',\r\n      username: '',\r\n      email:'',\r\n      isEnabled: true,\r\n      roles: [],\r\n      validRole: true\r\n    })\r\n  }\r\n  showUser = async () => {\r\n    let user =  this.props.userReducer.user;\r\n    await this.setState({\r\n      id: user.id,\r\n      username: user.username,\r\n      email:user.email,\r\n      isEnabled: user.isEnabled,\r\n      roles: user.roles\r\n    })\r\n  }\r\n  async componentWillUnmount(){\r\n    await this.props.onResetUserForDetail();\r\n  }\r\n  componentDidUpdate(){\r\n    if(this.props.userReducer.flgClickRow) {\r\n      this.showUser();\r\n      this.props.onResetUserForDetail();\r\n    }\r\n  }\r\n  render() {\r\n    let checked = roleId => {\r\n      let roles = this.state.roles.filter(role => {\r\n          return role.id === roleId\r\n      });\r\n      return roles[0] ? true : false;\r\n    }\r\n    return (\r\n      <Form onSubmit={this.handleSubmit.bind(this)} onReset={this.handleReset.bind(this)}>\r\n          <Card>\r\n              <CardHeader><i className=\"fas fa-user-plus\"></i> Tạo <strong>Tài Khoản</strong></CardHeader>\r\n              <CardBody>\r\n                <AlertCommon/>\r\n                  <Input type=\"hidden\" name=\"id\" value={this.state.id} onChange={this.changeHandler.bind(this)}/>\r\n                  <FormGroup >\r\n                      <Label>Tên đăng nhập</Label>\r\n                          <Input \r\n                            type=\"text\"\r\n                            id=\"username\"\r\n                            name=\"username\"\r\n                            onChange={this.changeHandler.bind(this)}\r\n                            required\r\n                            value={this.state.username}\r\n                            disabled={this.state.username === '' ? false: true}/>\r\n                      \r\n                  </FormGroup>\r\n                  <FormGroup>\r\n                      <Label>Email</Label>\r\n                          <Input \r\n                            type=\"email\" \r\n                            id=\"email\" \r\n                            name=\"email\" \r\n                            onChange={this.changeHandler.bind(this)} \r\n                            required\r\n                            value={this.state.email}\r\n                            disabled={this.state.email === '' ? false: true}/>\r\n                            </FormGroup>\r\n                  <FormGroup row>\r\n                      <Col md=\"4\"><Label>Quyền:</Label></Col>\r\n                      <Col md=\"8\" xs=\"12\">\r\n                            {this.props.roleReducer.roles.map(role => (\r\n                                <CustomInput\r\n                                    checked={checked(role.id)}\r\n                                    key={role.id}\r\n                                    type=\"checkbox\"\r\n                                    id={role.id}\r\n                                    label={role.detail}\r\n                                    name={role.id}\r\n                                    onChange={this.changeHandler.bind(this)} />\r\n                            ))}\r\n                      </Col>\r\n                  </FormGroup>\r\n                  <FormGroup row>\r\n                      <Col md=\"4\"><Label>Hoạt động</Label></Col>\r\n                      <Col md=\"8\" xs=\"12\">\r\n                          <CustomInput\r\n                              type=\"switch\"\r\n                              id='isEnabled'\r\n                              label='Hoạt động'\r\n                              name='isEnabled'\r\n                              checked={this.state.isEnabled}\r\n                              onChange={this.changeHandler.bind(this)}\r\n                              value = {this.state.isEnabled} />\r\n                      </Col>\r\n                  </FormGroup>\r\n              </CardBody>\r\n              <CardFooter className=\"text-right\">\r\n                  <Button type=\"submit\" size=\"sm\" color=\"primary\"><i className=\"fa fa-dot-circle-o\"></i> Lưu</Button>{' '}\r\n                  <Button type=\"reset\" size=\"sm\" color=\"danger\"><i className=\"fa fa-ban\"></i> Hủy</Button>\r\n              </CardFooter>\r\n          </Card>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  roleReducer: state.role,\r\n  alertReducer: state.alertReducer,\r\n  userReducer: state.user\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  onShowAlertError: async (message) => {\r\n    return await dispatch(showAlertFail(message))\r\n  },\r\n  onCreateAccount: async (account) => {\r\n    return await dispatch(createAccount(account))\r\n  },\r\n  onResetUserForDetail: async() => {\r\n    return await dispatch(resetUserFordetail());\r\n  }\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormAccount)\r\n"]},"metadata":{},"sourceType":"module"}