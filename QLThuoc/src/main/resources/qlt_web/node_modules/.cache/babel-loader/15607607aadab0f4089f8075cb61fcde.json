{"ast":null,"code":"import _defineProperty from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\LV\\\\qlt\\\\qlt_web\\\\src\\\\views\\\\Branch\\\\Branch.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { select, setBranch, deleteBranch } from '../../actions/branchAction';\nimport FormBrach from './FormBranch';\nimport { Table } from 'antd';\nimport PaginationCommon from '../Common/PaginationCommon';\nimport { pageRequestDefault } from '../../helpers/pageable';\nimport { Row, Col, Card, CardHeader, CardBody, CardFooter, Badge, Form, Input, InputGroupAddon, Button, InputGroup } from 'reactstrap';\nvar columns = [{\n  key: 'id',\n  title: 'ID',\n  dataIndex: 'id'\n}, {\n  key: 'name',\n  title: 'Tên Chi Nhánh',\n  dataIndex: 'name'\n}, {\n  key: 'isEnabled',\n  title: 'Hoạt động',\n  dataIndex: 'isEnabled',\n  render: function render(value) {\n    return React.createElement(Badge, {\n      color: value ? 'success' : 'danger',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, value ? 'Hoạt động' : 'Dừng hoạt động');\n  }\n}, {\n  key: 'isMain',\n  title: 'Chi Nhánh Chính',\n  dataIndex: 'isMain',\n  render: function render(value) {\n    return React.createElement(Badge, {\n      className: \"text-center\",\n      color: value ? 'success' : 'secondary',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }));\n  }\n}];\n\nvar index =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(index, _Component);\n\n  function index(props) {\n    var _this;\n\n    _classCallCheck(this, index);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(index).call(this, props));\n\n    _this.onSelectedRowKeysChange = function (keys) {\n      _this.setState({\n        seletedKeys: keys\n      });\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      _this.props.onSelect(_this.state.condition);\n    };\n\n    _this.handleDeletedRow =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _context.next = 3;\n                return _this.props.onDeleteBranch(_this.state.seletedKeys);\n\n              case 3:\n                _this.props.onSelect(_this.state.condition);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.changeHandler = function (event) {\n      var name = event.target.name;\n      var value = event.target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.state = {\n      seletedKeys: [],\n      condition: '',\n      idDirector: _this.props.authReducer.user.id\n    };\n    return _this;\n  }\n\n  _createClass(index, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.onSelect({\n        idDirector: this.state.idDirector,\n        pageable: pageRequestDefault()\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var rowSelection = {\n        onChange: function onChange(selectedRowKeys) {\n          _this2.onSelectedRowKeysChange(selectedRowKeys);\n        }\n      };\n\n      var onRow = function onRow(record) {\n        return {\n          onClick: function onClick(event) {\n            event.preventDefault();\n\n            _this2.props.onSetBranch(record);\n          }\n        };\n      };\n\n      return React.createElement(\"div\", {\n        className: \"animated fadeIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-list-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), \" Danh S\\xE1ch \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Chi Nh\\xE1nh\")), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: this.handleSubmit.bind(this),\n        className: \"form-inline justify-content-end pb-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        className: \"float-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"text\",\n        id: \"condition\",\n        name: \"condition\",\n        placeholder: \"T\\xEAn Chi Nh\\xE1nh\",\n        onChange: this.changeHandler.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(InputGroupAddon, {\n        addonType: \"append\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"submit\",\n        color: \"primary\",\n        className: \"btn-square\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      })))), React.createElement(Button, {\n        color: \"warning\",\n        className: \"btn-square ml-1\",\n        disabled: this.state.seletedKeys.length > 0 ? false : true,\n        onClick: this.handleDeletedRow.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"far fa-trash-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }))), React.createElement(Table, {\n        rowKey: \"id\",\n        columns: columns,\n        dataSource: this.props.branchReducer.branchs,\n        pagination: false,\n        rowSelection: rowSelection,\n        onRow: onRow,\n        bordered: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      })), React.createElement(CardFooter, {\n        className: \"float-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(PaginationCommon, {\n        className: \"pt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      })))), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(FormBrach, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return index;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    branchReducer: state.branchReducer,\n    authReducer: state.auth\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onSelect: function onSelect(condition) {\n      return dispatch(select(condition));\n    },\n    onSetBranch: function onSetBranch(branch) {\n      return dispatch(setBranch(branch));\n    },\n    onDeleteBranch: function onDeleteBranch(keys) {\n      return dispatch(deleteBranch(keys));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(index);","map":{"version":3,"sources":["D:\\LV\\qlt\\qlt_web\\src\\views\\Branch\\Branch.js"],"names":["React","Component","connect","select","setBranch","deleteBranch","FormBrach","Table","PaginationCommon","pageRequestDefault","Row","Col","Card","CardHeader","CardBody","CardFooter","Badge","Form","Input","InputGroupAddon","Button","InputGroup","columns","key","title","dataIndex","render","value","index","props","onSelectedRowKeysChange","keys","setState","seletedKeys","handleSubmit","event","preventDefault","onSelect","state","condition","handleDeletedRow","e","onDeleteBranch","changeHandler","name","target","idDirector","authReducer","user","id","pageable","rowSelection","onChange","selectedRowKeys","onRow","record","onClick","onSetBranch","bind","length","branchReducer","branchs","mapStateToProps","auth","mapDispatchToProps","dispatch","branch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { select, setBranch, deleteBranch } from '../../actions/branchAction'\r\nimport FormBrach from  './FormBranch'\r\nimport { Table } from 'antd'\r\nimport PaginationCommon from '../Common/PaginationCommon'\r\nimport { pageRequestDefault } from '../../helpers/pageable'\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  CardHeader,\r\n  CardBody,\r\n  CardFooter,\r\n  Badge,\r\n  Form,\r\n  Input,\r\n  InputGroupAddon,\r\n  Button,\r\n  InputGroup\r\n  } from 'reactstrap'\r\nconst columns = [\r\n  {\r\n    key: 'id',\r\n    title: 'ID',\r\n    dataIndex: 'id',\r\n  },\r\n  {\r\n    key: 'name',\r\n    title: 'Tên Chi Nhánh',\r\n    dataIndex: 'name',\r\n  },\r\n  {\r\n    key: 'isEnabled',\r\n    title: 'Hoạt động',\r\n    dataIndex: 'isEnabled',\r\n    render: value => (<Badge color={value? 'success': 'danger'}>{value? 'Hoạt động': 'Dừng hoạt động'}</Badge>)\r\n  },\r\n  {\r\n    key: 'isMain',\r\n    title: 'Chi Nhánh Chính',\r\n    dataIndex: 'isMain',\r\n    render: value => (\r\n      <Badge className=\"text-center\" color={value ? 'success': 'secondary'}><i className=\"fas fa-home\"></i></Badge>\r\n    )\r\n  },\r\n];\r\nclass index extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      seletedKeys: [],\r\n      condition:'',\r\n      idDirector: this.props.authReducer.user.id\r\n    }\r\n    \r\n  }\r\n\r\n  componentWillMount(){\r\n    this.props.onSelect(\r\n      {\r\n        idDirector:this.state.idDirector,\r\n        pageable:pageRequestDefault()\r\n      }\r\n    );\r\n  }\r\n\r\n  onSelectedRowKeysChange = (keys) => {\r\n    this.setState({seletedKeys: keys});\r\n  }\r\n\r\n  handleSubmit =  (event) => {\r\n    event.preventDefault();\r\n    this.props.onSelect(this.state.condition);\r\n  }\r\n\r\n  handleDeletedRow = async (e) => {\r\n    e.preventDefault();\r\n    await this.props.onDeleteBranch(this.state.seletedKeys);\r\n    this.props.onSelect(this.state.condition);\r\n  }\r\n\r\n  changeHandler = event => {\r\n    const name = event.target.name;\r\n    const value = event.target.value;\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const rowSelection = {\r\n      onChange: (selectedRowKeys) => {\r\n        this.onSelectedRowKeysChange(selectedRowKeys);\r\n      }\r\n    };\r\n    const onRow = (record) => {\r\n      return {\r\n        onClick: (event) => {\r\n          event.preventDefault();\r\n          this.props.onSetBranch(record);\r\n        }\r\n      };\r\n    }\r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        <Row>\r\n          <Col md=\"8\">\r\n            <Card>\r\n              <CardHeader>\r\n                  <i className=\"fas fa-list-alt\"></i> Danh Sách <strong>Chi Nhánh</strong>\r\n              </CardHeader>\r\n              <CardBody>\r\n                <Form onSubmit={this.handleSubmit.bind(this)} className='form-inline justify-content-end pb-2'>\r\n                  <InputGroup className=\"float-right\">\r\n                    <Input type=\"text\" id=\"condition\" name=\"condition\" placeholder=\"Tên Chi Nhánh\" onChange={this.changeHandler.bind(this)}/>\r\n                    <InputGroupAddon addonType=\"append\">\r\n                      <Button type=\"submit\" color=\"primary\" className=\"btn-square\"><i className=\"fas fa-search\"></i></Button>\r\n                    </InputGroupAddon>\r\n                  </InputGroup>\r\n                  <Button color='warning' className=\"btn-square ml-1\" disabled={this.state.seletedKeys.length > 0 ? false : true} onClick={this.handleDeletedRow.bind(this)}><i className=\"far fa-trash-alt\"></i></Button>\r\n                </Form>\r\n                <Table\r\n                  rowKey='id'\r\n                  columns={columns}\r\n                  dataSource={this.props.branchReducer.branchs}\r\n                  pagination = {false}\r\n                  rowSelection={rowSelection}\r\n                  onRow={onRow}\r\n                  bordered={true}\r\n                />\r\n              </CardBody>\r\n              <CardFooter className='float-right'>\r\n                <PaginationCommon className='pt-2'/>\r\n              </CardFooter>\r\n            </Card>\r\n          </Col>\r\n          <Col>\r\n              <FormBrach/>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  branchReducer: state.branchReducer,\r\n  authReducer: state.auth\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  onSelect: (condition) =>  {\r\n    return dispatch(select(condition))\r\n  },\r\n  onSetBranch: (branch) => {\r\n    return dispatch(setBranch(branch));\r\n  },\r\n  onDeleteBranch: (keys) => {\r\n    return dispatch(deleteBranch(keys));\r\n  }\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(index)\r\n"]},"metadata":{},"sourceType":"module"}